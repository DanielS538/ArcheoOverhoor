//1 Jaartallen
const perioden = [
    ["Vroeg Paleolithicum", "2.400.000 - 300.000 bp"],
    ["Midden Paleolithicum", "300.000 - 35.000 bp"],
    ["Laat Paleolithicum", "35.000 bp - 8800 v. chr."],
    ["Vroeg Mesolithicum", "8800 - 7100 v. chr."],
    ["Midden Mesolithicum", "7100 - 6450 v. chr."],
    ["Laat Mesolithicum", "6450 - 4900 v. chr."],
    ["Vroeg Neolithicum", "5300 - 4200 v. chr."],
    ["Midden Neolithicum", "4200 - 2850 v. chr."],
    ["Laat Neolithicum", "2850 - 2000 v. chr."],
    ["Vroege Bronstijd", "2000 - 1800 v. chr."],
    ["Midden Bronstijd", "1800 - 1100 v. chr."],
    ["Laat Bronstijd", "1100 - 800 v. chr."],
    ["Vroege IJzertijd", "800 - 500 v. chr."],
    ["Midden IJzertijd", "500 - 250 v. chr."],
    ["Laat IJzertijd", "250 - 12 v. chr."],
    ["Vroege Romeinse Tijd", "12 v. chr. - 70 n. chr."],
    ["Midden Romeinse Tijd", "70 - 270 n. chr."],
    ["Laat Romeinse Tijd", "270 - 450 n. chr."],
    ["Vroege Middeleeuwen", "450 - 1050 n. chr."],
    ["Laate Middeleeuwen", "1050 - 1500 n. chr."],
    ["Vroege Nieuwe Tijd", "1500 - 1650 n. chr."],
    ["Midden Nieuwe Tijd", "1650 - 1850 n. chr."],
    ["Late Nieuwe Tijd", "1850 - heden"],
];

//4 perioden steen
const periodensteen = [
    ["Vroeg Paleolithicum", "2.400.000 - 300.000 bp"],
    ["Midden Paleolithicum", "300.000 - 35.000 bp"],
    ["Laat Paleolithicum", "35.000 bp - 8800 v. chr."],
    ["Vroeg Mesolithicum", "8800 - 7100 v. chr."],
    ["Midden Mesolithicum", "7100 - 6450 v. chr."],
    ["Laat Mesolithicum", "6450 - 4900 v. chr."],
    ["Vroeg Neolithicum", "5300 - 4200 v. chr."],
    ["Midden Neolithicum", "4200 - 2850 v. chr."],
    ["Laat Neolithicum", "2850 - 2000 v. chr."],
];

//5 periode metaal-rom
const periodenmetaal = [
    ["Vroege Bronstijd", "2000 - 1800 v. chr."],
    ["Midden Bronstijd", "1800 - 1100 v. chr."],
    ["Laat Bronstijd", "1100 - 800 v. chr."],
    ["Vroege IJzertijd", "800 - 500 v. chr."],
    ["Midden IJzertijd", "500 - 250 v. chr."],
    ["Laat IJzertijd", "250 - 12 v. chr."],
    ["Vroege Romeinse Tijd", "12 v. chr. - 70 n. chr."],
    ["Midden Romeinse Tijd", "70 - 270 n. chr."],
    ["Laat Romeinse Tijd", "270 - 450 n. chr."]
];

//6 perioden-mid-nt
const periodennieuw = [
    ["Vroege Middeleeuwen", "450 - 1050 n. chr."],
    ["Laate Middeleeuwen", "1050 - 1500 n. chr."],
    ["Vroege Nieuwe Tijd", "1500 - 1650 n. chr."],
    ["Midden Nieuwe Tijd", "1650 - 1850 n. chr."],
    ["Late Nieuwe Tijd", "1850 - heden"]
]

//2 KNA protocollen
const knaprotocollen = [ 
    ["4001", "programma van eisen"],
    ["4002", "bureauonderzoek"],
    ["4003", "inventariserend veldonderzoek"],
    ["4004", "opgraven"],
    ["4006", "specialistisch onderzoek"],
    ["4010", "depotbeheer"]
];

//4 Archeologen
const archeologen = [
    ["Johan Picardt", "hunebedden, grafheuvels"],
    ["Titia Brongersma", "gedicht hunebedden"],
    ["Thomas Jefferson", "eerste wetenschappelijke opgraving"],
    ["James Hutton", "stratiegrafie"],
    ["Charles Lyell", "uniformitarianisme"],
    ["Jacques Boucher de Perthes", "analyse vuursteen"],
    ["Charles Darwin", "evolutietheorie"],
    ["Christian Jurgensen Thomsen", "bedenkt drie perioden systeem"],
    ["Jens Jacob Asmussen Worsaae", "bewijst drie perioden systeem"],
    ["John Lubbock", "verdeling steentijd, etnoarcheologie"],
    ["Augustus Lane-Fox Pitt-Rivers", "eerste professionele archeoloog"],
    ["Caspar Jacob Christiaan Reuvens", "eerste hoogleraar archeologie"],
    ["Henrich Schliemann", "ontdekker troje"],
    ["Jean-Francois Champollion", "ontcijfering rosetta steen"],
    ["Rawlinson", "ontcijfering spijkerschrift"],
    ["Howard Carter", "ontdekking graf toetanchamon"],
    ["Vere Gordon Childe", "cultuurdenken"],
    ["John Grahame Douglas Clark", "ecologische archeologie"],
    ["Willard Libby", "uitvinder 14c"],
    ["Lewis Robert Binford", "new archaeology"],
    ["Ian Hodder", "post processuele archeologie"],
    ["Jan Henrik Holwerda", "grondsporen, zoeksleuven"],
    ["Albert Egges van Giffen", "kwadrantenmethode, introductie 14c nl"],
    ["F.C. Bursch", "lid nsb"]
];

//7 Jaartallen Prehistorie
const periodenPrehistorie = [
    ["Vroeg Paleolithicum", "2.400.000 - 300.000 bp"],
    ["Midden Paleolithicum", "300.000 - 35.000 bp"],
    ["Laat Paleolithicum A", "35.000 - 18.000 bp"],
    ["Laat Paleolithicum B", "18.000 bp - 8800 v. chr."],
    ["Vroeg Mesolithicum", "8800 - 7100 v. chr."],
    ["Midden Mesolithicum", "7100 - 6450 v. chr."],
    ["Laat Mesolithicum", "6450 - 4900 v. chr."],
    ["Vroeg Neolithicum A", "5300 - 4900 v. chr."],
    ["Vroeg Neolithicum B", "4900 - 4200 v. chr."],
    ["Midden Neolithicum A", "4200 - 3400 v. chr."],
    ["Midden Neolithicum B", "3400 - 2850 v. chr."],
    ["Laat Neolithicum A", "2850 - 2450 v. chr."],
    ["Laat Neolithicum B", "2450 - 2000 v. chr."],
    ["Vroege Bronstijd", "2000 - 1800 v. chr."],
    ["Midden Bronstijd A", "1800 - 1500 v. chr."],
    ["Midden Bronstijd B", "1500 - 1100 v. chr."],
    ["Laat Bronstijd", "1100 - 800 v. chr."]
];

//8 Vuursteen
const vuursteen = [
    ["Zuid limburg, Zeer donker - tot lichtgrijs, Fijnkorrelig, Matte glans, zwarte en witte spikkels, witachtige en lichtgrijze vlekken", "rijckholt"],
    ["Geelbruin tot grijs, grofkorrelig", "Valkenburg"],
    ["Belgie, Zeer donker (donkerder) - tot lichtgrijs, fijn tot grofkorrelig, matte glanse, warte en witte spikkels, witachtige en lichtgrijze vlekken", "spiennes"],
    ["paarsgrijs met bruine buitenkant (wafeltjesijs), witte inclusies, plaatvormig", "lousberg"],
    ["Oranjebruin tot honingkleurig, suikerachtige glimmers", "le grand pressingy"],
    ["rood, oranjebruin, honingkleuring, chocoladebruin, zeer glimmend, fijnkorrelig", "deens"]
];

//9 Formaties-afzettingen
const formaties = [
    ["naaldwijk", "holoceen marien"],
    ["boxtel", "pleistoceen eolisch dekzand"],
    ["drente", "pleistoceen glaciaal"],
    ["echteld", "holoceen fluviatiel rijn"],
    ["nieuwkoop", "holoceen veen"],
    ["kreftenheye", "pleistoceen fluviatiel rijn"],
    ["beegden", "fluviatiel maas"],
    ["eem", "pleistoceen marien"],
    ["koewacht", "pleistoceen fluviatiel belg"],
    ["kreekrak", "holoceen fluviatiel belg"],
    ["woudenberg", "pleistoceen veen"]
];

//10 Afzettingen-formaties
const afzettingen = [
    ["holoceen marien", "naaldwijk"],
    ["pleistoceen eolisch dekzand", "boxtel"],
    ["pleistoceen glaciaal", "drente"],
    ["holoceen fluviatiel rijn", "echteld"],
    ["holoceen veen", "nieuwkoop"],
    ["pleistoceen fluviatiel rijn", "kreftenheye"],
    ["fluviatiel maas", "beegden"],
    ["pleistoceen marien", "eem"],
    ["pleistoceen fluviatiel belg", "koewacht"],
    ["holoceen fluviatiel belg", "kreekrak"],
    ["pleistoceen veen", "woudenberg"]
];

//11 Laagpakketten
const laagpakketten = [
    ["delwijnen", "boxtel rivierduinen"],
    ["kootwijk", "boxtel stuifzand"],
    ["schimmert", "boxtel loss"],
    ["wierden", "boxtel dekzand"],
    ["gieten", "drente eindmorene"],
    ["schaarsbergen", "drente sandr"],
    ["schoorl", "naaldwijk duin"],
    ["walcheren", "naaldwijk jong marien"],
    ["wormer", "naaldwijk oud marien"],
    ["zandvoort", "naaldwijk strand"],
    ["hollandveen", "nieuwkoop veen"]
];

//12 Culturen IJzertijd
const culturenIJzertijd = [
    ["Vroege IJzertijd","800 - 500 v. chr."],
    ["Hallstatt B3","800 - 700 v. chr."],
    ["Hallstatt C1","700 - 650 v. chr."],
    ["Hallstatt C2","650 - 600 v. chr."],
    ["Hallstatt D1","600 - 530 v. chr."],
    ["Hallstatt D2","530 - 500 v. chr."],
    ["Midden IJzetijd","500 - 250 v. chr."],
    ["Hallstatt D3","500 - 475 v. chr."],
    ["La Tène A","475 - 400 v. chr."],
    ["La Tène B","400 - 250 v. chr."],
    ["Late IJzertijd","250 - 12 v. chr."],
    ["La Tène C1","250 - 120 v. chr."],
    ["La Tène C2","120 - 12 v. chr."]
]

//13 VME baksels -> datering
const vmeBakselsDatering = [
    ["Hessens-Schortens", "500 - 900"],
    ["Kogelpot", "800 - 1350"],
    ["Kogelpot, schelpgruismagering", "800 - 1000"],
    ["Kogelbot, bezemstreek", "1200 - 1300"],
    ["Paffrath", "900 - 1250"],
    ["Elmpt", "1100 - 1400"],
    ["Merovingisch ruwwandig of Merovingisch Mayen", "400 - 750"],
    ["Badorf/Walderberg", "725 - 900"],
    ["Reliëfbandamfoor", "800 - 1000"],
    ["Hunneschans", "885 - 925"],
    ["Maaslands wit of Andenne", "900 - 1700"],
    ["Pingsdorf", "900 - 1200"],
    ["Karolingisch Mayen", "750 - 900"],
    ["Tating", "750 - 900"],
    ["Duisburg", "900 - 1000"],
    ["Proto-Steengoed", "1200 - 1325"]
]

//14 VME Potten -> baksels
const vmePotBaksel = [
    ["<img src='/ArcheoOverhoor/images/vme_potten/kogelpot.png'>", "kogelpot"],
    ["<img src='/ArcheoOverhoor/images/vme_potten/badorf_walderberg.png'>", "badorf/walderberg"],
    ["<img src='/ArcheoOverhoor/images/vme_potten/duisburg.png'>", "duisburg"],
    ["<img src='/ArcheoOverhoor/images/vme_potten/elmpt.png'>", "elmpt"],
    ["<img src='/ArcheoOverhoor/images/vme_potten/hessens_schortens.png'>", "hessens-schortens"],
    ["<img src='/ArcheoOverhoor/images/vme_potten/hunneschans.png'>", "hunneschans"],
    ["<img src='/ArcheoOverhoor/images/vme_potten/karolingisch_mayen.png'>", "karolingisch mayen"],
    ["<img src='/ArcheoOverhoor/images/vme_potten/kogelpot_bezemstreek.png'>", "kogelpot bezemstreek"],
    ["<img src='/ArcheoOverhoor/images/vme_potten/kogelpot_schelpgruis.png'>", "kogelpot schelpgruis"],
    ["<img src='/ArcheoOverhoor/images/vme_potten/maaslandswit_andenne.png'>", "maaslandswit/andenne"],
    ["<img src='/ArcheoOverhoor/images/vme_potten/merovingisch_ruwwandig_mayen.png'>", "merovingisch ruwandig/mayen"],
    ["<img src='/ArcheoOverhoor/images/vme_potten/paffrath.png'>", "paffrath"],
    ["<img src='/ArcheoOverhoor/images/vme_potten/pingsdorf.png'>", "pingsdorf"],
    ["<img src='/ArcheoOverhoor/images/vme_potten/protosteengoed.png'>", "protosteengoed"],
    ["<img src='/ArcheoOverhoor/images/vme_potten/reliefbandamfoor.png'>", "reliefbandamfoor"],
    ["<img src='/ArcheoOverhoor/images/vme_potten/tating.png'>", "tating"]
]

const selectbtn = document.querySelectorAll('#selectButton');
const btn = document.getElementById('answerButton');
const answer = document.getElementById('answer');
const questionBlock = document.getElementById('questionBlock');
const testSelect = document.getElementById('testSelect');
const feedback = document.getElementById('feedback');
const question = document.getElementById('question');

let currentAsk;
let currentTable;
var fouten = [];
let x = 0;
let repeat = false;

questionBlock.style.visibility = 'hidden';

console.log(selectbtn);
selectbtn.forEach(function(button){
    button.addEventListener('click', Select);
})
btn.addEventListener('click', Answer);

answer.addEventListener('keydown', (event) => {
    if (event.key === 'Enter') {
        Answer();
    }
});

//asking what is to be trained
function Select(){
    console.log(this.value);
    switch(this.value){
        case "1":
            Overhoor(perioden);
            break;
        case "2":
            Overhoor(knaprotocollen);
            break;
        case "3":
            Overhoor(archeologen);
            break;
        case "4":
            Overhoor(periodensteen);
            break;
        case "5":
            Overhoor(periodenmetaal);
            break;
        case "6":
            Overhoor(periodennieuw);
            break;
        case "7":
            Overhoor(periodenPrehistorie);
            break;
        case "8":
            Overhoor(vuursteen);
            break;
        case "9":
            Overhoor(formaties);
            break;
        case "10":
            Overhoor(afzettingen);
            break;
        case "11":
            Overhoor(laagpakketten);
            break;
        case "12":
            Overhoor(culturenIJzertijd);
            break;
        case "13":
            Overhoor(vmeBakselsDatering);
            break;
        case "14":
            Overhoor(vmePotBaksel);
            break;
    }
}

//overhoorfunctie
function Overhoor(table){

    testSelect.style.visibility = 'hidden';
    questionBlock.style.visibility = 'visible';
    Shuffle(table);
    currentTable = table;
    currentAsk = currentTable[x];
    Ask(currentAsk);
}

//asking a table item
function Ask(item){
    question.innerHTML = item[0]; 
}

//checking the answer, pushing to foutentable if wrong
function Answer(){
    if(answer.value == currentAsk[1]){
        feedback.innerHTML = "Correct";
    } else{
        feedback.innerHTML = "Incorrect: " + currentAsk[1];
        fouten.push(currentTable[x]);
        repeat = true;
    }
    x++;
    console.log(x);
    if(x == currentTable.length && repeat){
        x = 0;
        repeat = false;
        currentTable = fouten;
        currentAsk = currentTable[x];
        answer.value = "";
        console.log("repeat");
        Ask(currentAsk);
    } else if (x == currentTable.length && !repeat) {
        answer.value = "";
        feedback.innerHTML = "";
        question.innerHTML = ""; 
        fouten = [];
        x = 0;
        repeat = false;
        testSelect.style.visibility = 'visible';
        questionBlock.style.visibility = 'hidden';
    } else {
        answer.value = "";
        currentAsk = currentTable[x];
        Ask(currentAsk);
    }
}

//Input Sanatizer
function sanitize(string) {
    const map = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#x27;',
        "/": '&#x2F;',
    };
    const reg = /[&<>"'/]/ig;
    return string.replace(reg, (match)=>(map[match]));
  }

//Arrayshuffler
function Shuffle(array) {
    let currentIndex = array.length,  randomIndex;
  
    // While there remain elements to shuffle.
    while (currentIndex > 0) {
  
      // Pick a remaining element.
      randomIndex = Math.floor(Math.random() * currentIndex);
      currentIndex--;
  
      // And swap it with the current element.
      [array[currentIndex], array[randomIndex]] = [
        array[randomIndex], array[currentIndex]];
    }
  
    return array;
  }